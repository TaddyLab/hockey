%!TEX root = book.tex

\chapter{Hockey Player Ability via Regression}

\noindent
{\bf Robert B.~Gramacy, Matt Taddy, Sen Tian}

\bigskip A hockey player's plus-minus measures the difference between goals
scored by and against that player's team while the player was on the ice.
This measures only a marginal effect, failing to account for the influence of
the others he is playing with and against.   A better approach would be to
jointly model the effects of all players, and any other confounding
information, in order to infer a partial effect for this individual: his
influence on the box score regardless of who else is on the ice.

This chapter describes and illustrates a  simple algorithm for recovering such
partial effects.  There are two main ingredients.  First, we provide a
logistic regression model that can predict which team has scored a given goal
as a function of who was on the ice, what teams were playing, and details of
the game situation (e.g. full-strength or power-play).  Since the resulting
model is so high dimensional that standard maximum likelihood estimation
techniques fail,  our second ingredient is a scheme for regularized
estimation.  This adds a penalty to the objective that favors parsimonious
models and stabilizes estimation.  Such techniques  have proven useful in
fields from genetics to finance over the past two decades, and have
demonstrated an impressive ability to gracefully handle large and highly
imbalanced data sets.  The latest software packages accompanying this new
methodology---which exploit parallel computing environments, sparse matrices,
and other features of modern data structures---are widely available and make
it straightforward for interested analysts to explore their own models of
player contribution.

This framework allows us to quickly obtain high-quality estimates for the full
system of competing player contributions. After introducing the  measurement
problem in Section \ref{sec:intro}, we detail our regression model in Section
\ref{sec:regression} and the regularization scheme in Section
\ref{sec:regularization}.  The remainder of the chapter analyzes more than a
decade of data from the NHL.  We fit and interpret our main model, based on
prediction of goal scoring, in Section \ref{sec:goals}.  This is compared to
shot-based analysis, and metrics analogous to Corsi or Fenwick scores, in
Section \ref{sec:shots}.  Finally, Section \ref{sec:salary} considers the
relationship between our estimated  performance scores and  player salaries.
Overall, we are able to estimate a partial plus-minus metric that occurs on
the same scale as plus-minus but controls for other players and confounding
variables.  This metric is shown to be more highly correlated with salary than
the standard (marginal) plus minus.  Moreover, we find that the goals-based
metric is more correlated with salary than those based upon shots and blocked
shots.   We conclude in Section \ref{sec:conclusion} with thoughts on further
extension, in particular by breaking out of the linear framework to use
classification models popular in the Machine Learning literature.

The code for all empirical work in this chapter is provided in public a GitHub
repository (\verb!https://github.com/TaddyLab/hockey!) and utilizes open
source libraries for {\sf R} \cite{cranR}, particularly the {\sf gamlr} \cite{gamlr} package from \cite{taddy_one-step_2015}.


\section{Introduction: marginal and partial effects}
\label{sec:intro}

Hockey is played on ice, but that's not all that sets it apart from seemingly
related  sports like soccer, basketball, or even field hockey.  At least not
from an analytics perspective.  The unique thing about hockey is the rapid
substitution transpiring continuously during play, as well as at stoppages in
play.  In the data sets we have compiled, which we discuss in more detail
shortly, the median amount of time a particular on-ice player configuration
(determined by unique players on the ice for both both teams) is a mere eight
seconds. Although many ``shifts'' are much longer than that, a trickle of
piecemeal substitutions on both sides, transpiring as play develops, makes it
difficult to attribute credit or blame to players for significant events, such
as goals or shots.

Plus-minus (PM) is a traditional metric for evaluating player contributions in
hockey. It is calculated as the difference, for a given player, between the
number of goals scored against the player's team and those scored by the
player's team while that player was on the ice.  For example, during the
2012-2013 season Stanley Cup Finals, between Boston and Chicago, Duncan Keith
of the Chicago Blackhawks was on the ice for 8 goals by Chicago and 4 by
Boston, giving him a +4 PM for the series.
% c(-1,1)[Y[64538:64569]+1]*XP[64538:64569,"DUNCAN_KEITH"]

The PM score represents what statisticians call a \textit{marginal effect:}
the average change in some response (goals for-vs-against) with change in some
covariate (a player being on the ice) \textit{without accounting for whatever
else changes at the same time}. It is an aggregate measure that averages over
the contributions of other factors, such as teammates and opponents.   For
example, suppose that the three authors of this chapter are added to the
Blackhawks roster and that Joel Quenville (the coach of the Blackhawks) makes
sure that Duncan Keith is with us on the ice whenever we are playing.  Since
none of us are anything close to as good at hockey as Keith is, and surely our
poor play would allow the other team to score, this will cause Duncan Keith's
PM to drop.  At the same time, our PMs will be much higher than they would be
if we didn't get to play next to Duncan Keith.

Due to its simplicity and minimal data requirements, plus-minus has been a
preferred metric for the last fifty-odd years.  But since it measures a
marginal effect, the plus-minus is impacted by many factors beyond the player
ability, which is the actual quantity of interest.  The ability of a player's
teammates, or the quality of opponents, are not controlled for.  The amount of
playing time is also not factored in, meaning plus-minus stats are much
noisier for some players than others. Finally, goalies, teams, coaches,
salaries, situations, special teams, etc.---which all clearly contribute to
the nature of play, and thus to goals---are neither accounted for when
determining player ability by plus-minus, and nor are they used to explain
variation in the goals scored against a particular player or team.

Instead of marginal effects, statisticians are more often interested in
\textit{partial effects}: change in the expected response that can be
accounted for by change in your variable of interest \textit{after removing
the change due to other influential variables.} In the example above, a
partial effect for Duncan Keith would be unchanged if he plays with the
authors of this article or with the current members of the Blackhawks.  In
each case, the partial effect will attempt to measure how Duncan Keith can
influence the box-score regardless of who he skates with. Because such partial
effects help us predict how Keith would perform on a different team or with a
different combination of line-mates, this information is more useful than
knowing a marginal effect.

One way that statisticians can isolate partial effects is by running
\textit{experiments}.  Suppose that now, instead of playing for the
Blackhawks, we are coaching them.  In order to figure out the value of Keith,
we could randomly select different players to join him whenever he is on the
ice and send completely random sets of players onto the ice whenever he is not
playing.  Then, due to the setup of this randomized experiment, Keith's
resulting PM score will represent a partial effect -- his influence regardless
of who he plays with.  Of course, no real hockey coach would ever manage their
team in this way.  Instead, we hockey analysts must make sense of
\textit{observational data} that is collected as the games are naturally
played, with consistent line mates and offensive-defensive pairings and where
Duncan Keith tends to play both with and against the best players available.

Partial effects are measured from observational data through
\textit{regression}: you model the response (e.g., goals) as a function of
many  influential variables (\textit{covariates}; e.g., all of the players on
the ice).  With rich enough data, we can simultaneously estimate the full set
of competing partial effects corresponding to all of our influential
variables.  This is straightforward when there are only a small number of
covariates.  However, the standard regression algorithms will fail when the
number of covariates is large. This `high dimensional regression' setting
occurs in hockey analysis, where we would like to regress `goals' onto the set
of variables corresponding to whether each NHL player is on the ice (a set of
2500 players in our dataset) while also including effects of team, season,
playoffs, and special teams scenarios (e.g. power plays).  Moreover, the
covariate design is highly \textit{imbalanced}: over the span of several
seasons there may be  tens of thousands of goals, but players play with and
against only a small fraction of other players and the number of unique player
configurations is relatively small.  Due to the use of player lines, and
consistent line match-ups with opponents, where groups of two or three players
are consistently on ice together at the same time, the data contain many
clusters of individuals who are seldom observed apart.  Standard regression
algorithms, such as maximum likelihood inference via Fisher scoring, will
either massively \textit {over-fit} (e.g. assign large effects to players who
rarely play) or simply fail to converge.

However, there has been a tremendous improvement over the past two decades in
the techniques available for high dimensional regression analysis.  These
advancements are driven by the demands of researchers in genetics and finance,
for example, for whom resolving partial effects amongst  large sets of
variables is the key to their science.  The most successful approaches
introduce some amount of \textit{regularization}  to the estimation
problem---an additional penalty term that rewards simplicity (e.g.,
\cite{hastie:tibsh:fried:2001}).  In our context, regularization shrinks
towards a model where individual players don't make a huge difference while
still allowing for large estimated player effects when the data warrant it.
This conforms to what most analysts already believe: many players have a
neutral, or ``zero'', effect (relative to the NHL average), whereas some are
stars and others are liabilities.     The amount of regularization is chosen
to make the model perform as well as possible in out-of-sample prediction and,
again, contemporary statistical learning tools are designed to do exactly
this---reliably predict the future. To take advantage of these tools, we  need
only to phrase partial player effect estimation  as a regression problem.


 
\section{Regression Model}
\label{sec:regression}

The goal of our regression analysis will be to estimate a model that  relates
individual presence on the ice to observable outcomes of interest.  We
describe the model here for a goals-based analysis, but extend it to shots and
other metrics in the analysis sections.

Previous attempts at partial player effect estimation range from standard
linear regression (usually on aggregate data)---the adjusted plus-minus
scores of \cite{awa09}, \cite{schlocwel10},  and \cite{mac10}---to the complex
hazard model of
\cite{ThoVenJen12}, which proposes a proportional hazards process for
game events, allowing partial player effects to be backed out from high
resolution game data. 
Adjusted plus-minus is built from similar ideas for Basketball analysis (see
\cite{ros04}and \cite{ilabar08}). Its linear model analysis implies an
underlying normality assumption for the error structure; this may be a good
approximation for basketball, where scoring is frequent and variability in
player configurations is small, but it is  inappropriate for disaggregated
data with a binary response (e.g., whether an individual goal is for-vs-against
the home team).  Such misspecification becomes especially problematic when
combined with the modern regularization techniques necessary for reliable
estimation of high dimensional models.  On the other hand, more complex
stochastic process modeling requires many additional assumptions on the data
generating process and can be difficult to validate in practice; moreover,
models such as that of \cite{ThoVenJen12} take far longer to run than we wish
for our analysis.

The goal of our modeling is to provide a correct treatment of the binary
`goals' data without introducing significant additional modeling complexity.
In particular, we advocate the simple \textit{logistic regression} framework
suggested by \cite{gramacy:jensen:taddy:2013}.  In logistic regression, the
average log odds of a goal being scored ``for'' a particular team  is modeled
as a linear function of predictor variables which may be comprised of an
indicator of player configuration and other quantities, which is otherwise
identical to the familiar ordinary (least squares) regression setup.  We
provide a detailed description of the model here, but refer the reader to
\cite{sheather:2009} or similar texts covering {\em Generalized Linear Models
(GLMs)}, of which logistic regression is a special case.
The setup is rather straightforward, easy to
extend, and highly interpretable.  Estimated coefficients describe
contributions to the log odds of goals, and we show that these can be
converted back onto the scale of goals, resulting in a adjusted plus-minus
statistic, but this time one which is a true partial effect.  

Given $n$ goals throughout the National Hockey League (NHL) over some
specified time period,  say $y_i$ is $+1$ for a goal by the \textit{home} team
and $-1$ for a goal by the \textit{away} team.\footnote{{\em home} and {\em
away} are merely organizational devices, creating a consistent binary
bifurcation for goals that can be applied across games, seasons, etc. Due to
the symmetry in the logit transformation, player effects are unchanged when
framing away team probabilities as $q_i$ rather than $1-q_i$, so we loose no
generality by privileging home team goals in this way.}  Say that $\boldsymbol{q_i =
\mathrm{p}(y_i = 1) =  \mathrm{p}(\textbf{home~team~scored~goal}~i)}$.  The
logistic regression model of player contribution is, for goal $i$ in season
$s$ with away team $a$ and home team $h$,  \begin{align}\label{hockeymod}
\log\left[\frac{q_{i}}{1-q_{i}}\right] = \alpha + \mathbf{u}_i'\boldsymbol{\gamma} +
\mathbf{v}_i'\boldsymbol{\varphi} + \mathbf{x}_i'\boldsymbol{\beta}_0 +
(\mathbf{x}_i\circ\mathbf{s}_i)'(\boldsymbol{\beta}_s + p_i'\boldsymbol{\beta}_{p}), \end{align}  
where
\begin{itemize}
\item Vector $\mathbf{u}_i$ holds indicators for each team-season (e.g., the Blackhawks in 2012-2013 would correspond to a coordinate of $\mathbf{u}_i$), set 
$u_{it}=+1$ if team-season $t$ was the home team for goal $i$, $u_{it}=-1$ for the away team, and $u_{it}=0$ if team-season $t$ was not on the ice for goal $i$.  This information is included to control for factors beyond the player's control, such as quality of coaching and fan support.
\item Vector $\mathbf{v}_i$ holds indicators for various special-teams scenarios (e.g., being short-handed on a penalty kill), again set $v_{ik}=+1$ if the home team is in special-teams scenario $k$ when goal $i$ was scored, $v_{ik}=-1$ if the away team is in scenario $k$, and $v_{ik}=0$ if neither team was in scenario $k$ when goal $i$ was scored.  We consider $6$ non-six-on-six settings (6v5, 6v4, 6v3, 5v4, 5v3, 4v3) and an additional `pulled goalie' indicator; note that more than $35\%$ of the goals occur on some type of special teams scenario. 
\item Vector
$\mathbf{x}_i$ contains player-presence indicators, set $x_{ij}=1$ if player $j$ was on the
home team and on ice for goal $i$, $x_{ij}=-1$ for away player $j$ on ice for
goal $i$, and $x_{ij}=0$ for everyone not on the ice. With $\circ$ denoting the Hadamard (element-wise) product, this player vector is also interacted with 
\begin{itemize}
\item  season (e.g., 2013-2013) vector $\mathbf{s}_i$, with $s_{ti} = 1$ if goal $i$ was scored in season $t$, and
\item the post-season indicator $p_i$  for whether or not the goal was scored in the playoffs, with $p_{i} =1$ for the playoffs and zero for the regular season.
\end{itemize}  
\end{itemize}
Thus coefficient
$\beta_{0j} + \beta_{sj}$ is the regular-season-$s$ effect of player $j$ on the log
odds that, given a goal has been scored, the goal was scored by their team.  Coefficient 
$\beta_{0j} + \beta_{sj} + \beta_{pj}$ is the corresponding effect for post-season-$s$ (note that, under the regularization scheme in the next section, $\beta_{pj}$ will be fixed at zero unless player $j$ reaches the playoffs). 
These effects are `partial' in that they control for who else was on the ice,
special teams scenarios, and team-season effects---a player's
$\beta_{0j}$ or $\beta_{sj}$ only need be nonzero if that player effects play
above or below the team average for a given season.  A test of
understanding: what does the intercept $\alpha$ represent in
(\ref{eq:simplemodel})?\footnote{It is the home ice advantage: if you do not
know anything about who is playing or on the ice, the odds are $e^{\alpha}$
higher that the home team has scored any goal.}


For intuition, consider a simple ``player-only'' version of our model that has
only who-is-on-the-ice as a time-invariant influence on goal scoring.  This is the version of the model that was applied in \cite{gramacy:jensen:taddy:2013}.  Then
there are no team-season-specific intercepts ($\alpha_{sh}=\alpha_{sa}=0$), no
special teams effects ($\boldsymbol{\phi}=\mathbf{0})$, and no season-specific
player-effect changes ($\boldsymbol{\beta}_s = \mathbf{0}$ and $\boldsymbol{\beta}_p = \mathbf{0}$)  so that $\beta_j
= \beta_{0j}$ is the constant effect of player $j$.  The log odds that the
home team has scored a given goal become \begin{equation} \log
\left[\frac{q_i}{1-q_i} \right]  = \alpha + \beta_{h_{i_1}} + \cdots +
\beta_{h_{i_6}} -  \beta_{a_{i_1}} - \cdots - \beta_{a_{i_6}},
\label{eq:simplemodel} \end{equation} where the subscripts on the coefficients
$\beta$ are as follows: $h_{i_1}, \dots, h_{i_6}$ are the six players on the
ice for the home team and  $a_{i_1}, \dots, a_{i_6}$ indicate the players for
the away time.\footnote{In this setup the goalies {\em are} included in the
calculations, unlike with {\em plus-minus}.}  This is the just a re-writing of
$\mathbf{x}_i'\boldsymbol{\beta}$ from (\ref{hockeymod}), where the vector
$x_i$ (of length equal to the number of players) contains the ``$+1$'' and
``$-1$'' indicators depending on whether that player was on the home or away
team, and where all other $x_{ij}$ are zero so that $\sum_j |x_{ij}| = 12$ for
full-strength play. See Figure \ref{fig:data} for illustration. 

\begin{figure}[hbt]
    \centering
    \begin{tikzpicture}
    \matrix [column sep=7mm, row sep=2mm] {
        \node [draw=none, fill=none] {$Y$: scoring team}; &
        \node [draw=none, fill=none] {$X_P$: players}; &\\
        \node [draw=none, fill=none] {$y_i\in\{{-1},1\}$}; &
        \node [draw=none, fill=none] {$x_{Pij}\in\{{-1},0,1\}$}; &\\
        \node (y1) [draw, shape=rounded rectangle] {$\hspace{7pt}1$}; &
        \node (xp1) [draw, shape=rounded rectangle, label={[label distance=0.1mm]90:\small $1 \hspace{145pt} n_p$}] {$0\, 1\, {-1}\, 1\, 0\, {-1}\, 0\, {-1}\, 1\, {-1}\, {-1}\,  0\, 0 \cdots 0\, 1\, 0\, 1\, 1$}; &\\
        \node [draw=none, fill=none] {$\vdots$}; &
        \node [draw=none, fill=none] {$\vdots$}; &\\
        \node [draw, shape=rounded rectangle] {$-1$}; &
        \node [draw, shape=rounded rectangle] {$1\, {-1}\, 1\, {-1}\, 0\, 1\, 0\, 1\, {-1}\, 1\, 1\, 0 \cdots 0\, {-1}\, 0\, {-1}\, {-1}$};&\\
    };
    \end{tikzpicture}
    \caption{Diagram of a simple design matrix for a `players only model' and two example goals (rows). The two goals are shown in the same season under the same configuration of teams except that the first goal was scored by the home team while the second goal was by the away team. The configurations of players are only differed by the first player since the home team was on a 6v5 power play for the first goal. }\label{fig:data}
\end{figure}

The model in \ref{hockeymod} is simple and transparent; if you wish to
control for new variables or situations you just need to add covariates to the
logistic regression. In theory, one could fit the model easily in  {\sf R} by
typing \begin{verbatim} R> fit <- glm(y~X, family="binomial") \end{verbatim}
But unfortunately, that just doesn't work.   The problem is that hockey data
is too high dimensional (too many covariates) for ordinary logistic regression
software, and the design matrices are too highly imbalanced to obtain
meaningful (low variance) estimates of player effects.   In almost all
regressions one is susceptible to the temptations of rich modeling when the
data set is large, and our hockey setup is no different. One must be careful
not to {\em over-fit}, wherein parameters are optimized to statistical noise
rather than fit to the relationship of interest.  And one must be aware of
{\em multicollinearity}, where groups of covariates are correlated with each
other making it difficult to identify individual effects, as happens when
players are grouped into lines.  



A first approach to finding a remedy might be to entertain stepwise
regression, e.g., via {\tt step} in {\sf R} with a stopping rule based upon an
information criteria like AIC and BIC.  But that also doesn't work on this
data: the calculations take days, and turn up very few non-zero predictors
(i.e., players whose presence have any effect on goals).  The trouble here is
that players  can't be judged on their own, since they always play with and
against eleven others.  Therefore the one-at-a-time judgments made by {\tt
step} fail to discover many relevant players despite making a combinatorially
huge number of such comparisons.  Moreover, stepwise regression results are
well known to be highly variable: tiny jitter to the data can lead to massive
changes in the estimated model. The combined effect is an unstable algorithm
that yields overly simple results and takes a very long time to run.

Instead, a crucial contribution of
\cite{gramacy:jensen:taddy:2013} is to suggest the use of modern penalized and
Bayesian logistic regression models, which biases the estimates of player
effects towards zero. In the next section we consider one fast and successful
version of these methods: $L_1$ regularization.

\section{Regularized Estimation}
\label{sec:regularization}

Our solution is to take a modern regularized approach to regression.  If
$\eta_i = \log[ q_i/(1-q_i) ]$ is our linear equation for log odds from
(\ref{hockeymod}), then the usual maximum likelihood estimation routine (e.g.,
via {\sf glm} in {\sf R}) minimizes the negative log likelihood objective
\begin{equation}\label{eq:nllhd} l\left(\boldsymbol{\eta}; \mathbf{y}\right) =
\sum_i \log\left(1 + \exp[-y_i \eta_i]\right). \end{equation} Instead, a
\textit{regularized} regression algorithm will minimize a penalized objective,
say $ l\left(\boldsymbol{\eta}; \mathbf{y}\right) + n\lambda
\sum_{j=1}^p\left[ c_j\left(|\beta_{0j}|\right) +
c\left(|\beta_{sj}|\right)\right]$, where $\lambda>0$ controls overall penalty
magnitude, $c_j(\cdot)$ are coefficient cost functions, while $n$ is the total
number of goals and $p$ is the number of players.
A few common cost functions are shown in Figure \ref{costs}.  Those that have
a non-differentiable spike at zero (all but ridge) lead to sparse estimators,
with some coefficients set to exactly zero.   The curvature of the penalty
away from zero dictates the weight of shrinkage imposed on the nonzero
coefficients:  $L_2$ costs increase with coefficient size,  lasso's $L_1$
penalty has zero curvature and imposes constant shrinkage, and as curvature
goes towards $-\infty$ one approaches the $L_0$ penalty of subset selection.

\begin{figure}[t]
\includegraphics[width=\textwidth]{figures/penalties}
\caption{\label{costs} 
From left to right, 
$L_2$ `ridge' costs \cite{hoerl_ridge_1970}, $L_1$ `lasso' \cite{tibshirani_regression_1996}, the `elastic net' mixture of $L_1$ and $L_2$ \cite{zou_regularization_2005}, and the log penalty \cite{candes_enhancing_2008}.
}
\end{figure}

In this article we focus on the $L_1$ penalty for its balance between
shrinkage of large signals (players tend not to have huge effects) and a
preference for sparsity (we can only measure the nonzero effects of a subset
of players).  For these and many appealing theoretical reasons (and for
computational tractability), the $L_1$ penalty is by far the most commonly
used in contemporary regularized regression; see
\cite{hastie:tibsh:fried:2001} for a broad-audience overview and
\cite{taddy_one-step_2015} for details on the algorithms used in this chapter.
Under lasso $L_1$ penalization, estimation proceeds through optimization of
\begin{equation} \label{pendev}
l\left(\boldsymbol{\eta}; \mathbf{y}\right) + n\lambda \sum_{j=1}^p\left(|\beta_{0j}| + |\beta_{sj}| + |\beta_{pj}|\right).
\end{equation}
It is important to note there that we are \textit{penalizing only the player
effects}.  The team-season effects ($\boldsymbol{\gamma}$).  This strategy of
combining penalized and unpenalized estimation is advocated in, e.g.,
\cite{taddy_distributed_2015} and \cite{gentzkow_measuring_2015}.  It works
nicely whenever you have a subset of covariates for which there is strong data
signal (many repeated observations, which we have for team-season and special
teams effects) and whose effect you'd like to completely remove from
estimation for other coefficients.  In this way, we ensure that the player
effect estimates are not \textit{polluted} by confounding effects in
$\mathbf{u}$ and $\mathbf{v}$.  

Moreover, consider the covariates acting on $\boldsymbol{\beta}_0$,
$\boldsymbol{\beta}_s$, and $\boldsymbol{\beta}_p$ in (\ref{hockeymod}): each
interacts $\mathbf{x}_i$ with additional binary indicators, such that
$\beta_{0j}$ acts on more nonzero terms than $\beta_{sj}$, which itself acts
on more nonzero terms than $\beta_{pj}$.  There is therefor less signal
associated with the season and playoff player effect innovations than with the
player baseline effects, and these will tend to be estimated at zero unless
there is significant evidence that a player has become better or worse across
seasons or in a given post-season.

Penalty size, $\lambda$, acts as a {\it squelch}: canceling noise to
focus on the true input signal. Large $\lambda$ lead to very simple  model
estimates, while as $\lambda \rightarrow 0$ we approach maximum likelihood
estimation. Since you don't know optimal $\lambda$, practical
application of penalized estimation requires a {\it regularization path}: a $p
\times T$ field of $\boldsymbol{\hat\beta}$ estimates obtained while moving
from high to low penalization along $\lambda^1 > \lambda^2 \ldots >
\lambda^T$. These paths begin at $\lambda^1$ set to infimum $\lambda$ such
that (\ref{pendev}) is minimized at $\boldsymbol{\hat\beta} = \mathbf{0}$, and proceed
down to some pre-set $\lambda^T$ (e.g., $\lambda^T= 0.01\lambda^1$).

 A common tool for choosing the optimal $\lambda$---that for which we report
 estimated player effects---is cross validation (CV).  In CV, the path of
 coefficients is repeatedly fit to data subsamples and used to predict the
 response on the left-out data. The $\lambda$ leading to minimum error is then
 selected as optimal.  In this chapter, we instead use an analytic alternative
 to CV that yields models that perform as well or better out-of-sample.   The
 corrected Akaike Information Criterion (AICc), proposed in
 \cite{hurvich_regression_1989}, is defined as
\begin{equation*}
AICc = 2\sum_{i=1}^{n} l(\boldsymbol{\hat\eta}_{\lambda};\mathbf{y}) + \frac{2kn}{n-k-1},
\end{equation*}
where $\boldsymbol{\hat\eta}_{\lambda}$ are the estimated log odds under
penalty $\lambda$ and $k$ is the number of non-zero estimated coefficients at
this penalty. See \cite{taddy_one-step_2015} and \cite{flynn_efficiency_2013}
for details on AICc selection in this context; we find AICc preferable to CV
because it is computationally efficient (you only need to optimize once) and
because there is no random Monte Carlo variation---it always gives the same
answer on the same data.  However, all of our ideas here apply if you wish to
use CV selection instead. 

The {\tt gamlr} package \cite{gamlr} can
be called via {\sf R} to implement this procedure:
\begin{verbatim}
R> fit <- gamlr(X, Y, standardize=FALSE, family="binomial")
\end{verbatim}
For CV, just replace \verb!gamlr! with \verb!cv.gamlr!. The
\verb!standardize=FALSE! flag tells \verb!gamlr! to \textit{not} weight the
coefficient penalties by the standard deviation of the corresponding covariate
(i.e., to use penalty $\lambda|\beta_j|$ instead of
$\lambda\mathrm{sd}(\mathbf{x}_j)|\beta_j|$); this is appropriate here because
such standardization would \textit{up-weight} the influence of players who
rarely play (and have low $\mathrm{sd}(\mathbf{x}_j)$) relative to those who
have a lot of ice time (and thus high $\mathrm{sd}(\mathbf{x}_j)$).  The
software exploits sparsity in our player effects (\verb!X!) via the
\verb!Matrix! library for {\sf R}, and is extremely fast to run: no examples
in this article require more than a few seconds of computation. Estimated
coefficients at optimal $\lambda$ are available as \verb!coef(fit)!.


One natural way to understand regularized regression is through the lens of
Bayesian posterior inference. Judiciously chosen prior distributions lend
stability to the fitted model, which is crucial in contexts where the number
of quantities being estimated is large. In our setting where larger
$\beta$-values indicate large positive or negative contributions to player
ability, it makes sense to choose a prior that encourages coefficients to
center around zero, a so-called {\em shrinkage} prior.  Our {\em a priori}
belief is that most players are members of the rank-and-file: their
contribution to goals is {\em neutral} (e.g., zero on the log-odds scale), and
that only a handful of stars (and liabilities) have a strong contribution to
the chances of scoring (or letting in) goals.  From the perspective of point
estimation, adding a prior on $\beta_j$ centered at zero is equivalent to
adding a penalty term for $\beta_k \ne 0$ in our objective function. Different
choices of priors correspond to different penalty functions on $\beta_j \ne
0$; a Laplace prior distribution on each $\beta_j$  corresponds to our $L_1$
penalty in (\ref{pendev}).  Thus, our minimization of this objective function
is interpretable as Bayesian posterior maximization.

\section{Analysis: goal-based effects}
\label{sec:goals}



This section attempts to quantify the performance of hockey players using data
from National Hockey League. It extends  analysis in
\cite{gramacy:jensen:taddy:2013}, which used a smaller dataset, was less
principled in selection of $\lambda$, and did not control for team-season or
special teams effects. The data, downloaded from \url{http://www.nhl.com},
comprise of play-by-play NHL game data for regular and playoff games during
$11$ seasons of 2002-2003 through 2013-2014\footnote{Season 2004-2005 was a
lockout that resulted in a cancellation}. The data capture all the shifts in
every single game, such as change, goal, shot, blocked shot, miss shot,
penalty and etc. There were $p=2439$ players involved in $n_g=69449$ goals.


The analysis proceeds through estimation of the model from (\ref{hockeymod}),
\begin{align*}
\log\left[\frac{q_{i}}{1-q_{i}}\right] = \alpha + \mathbf{u}_i'\boldsymbol{\gamma} +
\mathbf{v}_i'\boldsymbol{\varphi} + \mathbf{x}_i'\boldsymbol{\beta}_0 +
(\mathbf{x}_i\circ\mathbf{s}_i)'(\boldsymbol{\beta}_s +
p_i'\boldsymbol{\beta}_{p}), \end{align*} by minimization of the implied
penalized deviance in (\ref{pendev}). The estimated player coefficients for
each season $s$ are then available as $\beta_{0j} + \beta_{sj}$,  the
combination of a  baseline effect plus a season-specific innovation.  These
effects represent the estimated change in the log odds that, given a goal was
scored, the goal was scored by player $j$'s team.


The standard PM score accounts not only for a players ability, but also the
amount that they play.  This is important: it is relatively easy to show high
performance if you only play a little bit; the stars in the NHL tend to log
much longer minutes, and their value to the team is that they can maintain a
high performance across this heavy workload.  In order to translate our
estimated partial effects to the same scale as PM, we introduce the
 \begin{itemize}
\item[]\hskip -.5cm\textbf{Partial plus-minus (PPM)}
\item Say that $q_{sj} = 1/\exp[\beta_{0j} + \beta_{sj}]$; this is the probability that, given a goal was scored in season $s$, it was scored by player $j$'s team {\it if we know nothing else other than that player $j$ was on the ice}.  
\item Then, the partial plus minus statistic summarizes the expected goal differential due to player $j$ if they are on the ice for $g_{sj}$ total goals (for or against) during season $s$:
\begin{equation}\label{eq:ppm}
 \text{PPM}_{sj} = g_{sj}p_{sj} - g_{sj}(1-p_{sj}) = g_{sj}(1 - 2p_{sj}).
 \end{equation} 
\end{itemize}
The same calculations apply for a post-season PPM, with $q_{spj} =
1/\exp[\beta_{0j} + \beta_{sj}+ \beta_{pj}]$ and $g_{spj}$ the total goals
that player $j$ was on ice for in post-season $s$.

PPM lives on the same scale as PM: it is directly comparable as the partial
effect analogue to PM's marginal effect.  Table \ref{tab:goals} provides a
list of top and bottom players listed by their PPM, along with the
corresponding $\beta$ effects and their standard PM.  Since these PPMs and
effects are calculated for each season, players will occur repeatedly in the
table; for example, Sidney Crosby has 4 of the top 10 best player-seasons
since 2002; he has been consistently the best, or near best, player in the
league.  The number one player-season since 2002 by PPM is Peter Forsberg in 2002-2003,
with a PPM of 55.5.  This is around 25\% better than the 2nd best PPM:
Crosby's 43.5 in 2009-2010.  Notice that the $\beta$ effects in the table are
all unchanged from regular and post-season: this is actually true for all
10,000 player seasons: using goals data, we never see enough signal to conclude
that a given player was significantly better or worse in the post-season than
in the regular season.  However, many of the $\beta_{sj}$ are estimated at
nonzero values: there is measurable signal indicating that player performance
changes across seasons.

\begin{table}[p]
        \centering\small
        \begin{tabular}{r c c r r r r r r }
        \multicolumn{9}{l}{\bf Goal-based performance analysis}\\
            & & & \multicolumn{3}{|c}{Regular Season} & \multicolumn{3}{|c}{Post Season}\\
            Rank & Player & Season  & \multicolumn{1}{|c}{$\beta$} & PPM & PM & \multicolumn{1}{|c}{$\beta$} & PPM & PM  \\ \hline
            \rule{0pt}{4ex} 
1&PETER FORSBERG	&	20022003	&	0.74	&	55.52	&	85	&	0.74	&	4.6	&	5	\\
2&SIDNEY CROSBY	    &	20092010	&	0.41	 &	43.47	&	60	&	0.41	&	7.45	&	19\\
3&DOMINIK HASEK	    &	20052006	&	0.35	&	42.45	&	80	&	0	    &	0	&	0\\
4&SIDNEY CROSBY	    &	20082009	&	0.41	 &	42.26	&	48	&	0.41	&	10.87	&	26\\
5&SIDNEY CROSBY	    &	20052006	&	0.41	 &	41.86	&	52	&	0	    &	0	&	0	\\
6&PETER FORSBERG	&	20052006	&	0.74	&	40.67	&	61	&	0.74	&	4.95	&	4\\
7&PAVEL DATSYUK	    &	20072008	&	0.4	     &	39.49	&	87	&	0.4	    &	7.27	&	25\\
8&PAVEL DATSYUK	    &	20082009	&	0.4	     &	39.49	&	69	&	0.4	    &	4.13	&	11\\
9&SIDNEY CROSBY	    &	20062007	&	0.41	 &	35.62	&	79	&	0.41	&	2.01	&	4\\
10&MARK STREIT	    &	20082009	&	0.35	&	35.08	&	24	&	0	    &	0	&	0	\\
11&MATT MOULSON	    &	20112012	&	0.41	 &	34.92	&	37	&	0	    &	0	&	0   \\
12&LUBOMIR VISNOVSKY&	20102011	&	0.31	&	34.52	&	70	&	0.31	&	2.95	&	3	\\
13&ALEX OVECHKIN	&	20082009	&	0.28	&	34.46	&	80	&	0.28	&	4.94	&	19	\\
14&JOE THORNTON	    &	20092010	&	0.39	 &	33.91	&	52	&	0.39	&	8.09	&	-4	\\
15&JOE THORNTON	    &	20102011	&	0.39	 &	33.91	&	48	&	0.39	&	7.51	&	1	\\
16&ONDREJ PALAT	    &	20132014	&	0.56	&	32.75	&	37	&	0.56	&	2.48	&	1	\\
17&PAVEL DATSYUK	&	20062007	&	0.4	     &	32.61	&	70	&	0.4	    &	6.09	&	13	\\
18&JOE THORNTON	    &	20022003	&	0.39	 &	32.17	&	47	&	0.39	&	0.96	&	-3	\\
19&JOE THORNTON	    &	20072008	&	0.39	 &	32.17	&	69	&	0.39	&	4.43	&	7	\\
20&ANDREI MARKOV	&	20072008	&	0.28	&	31.9	&	47	&	0.28	&	3.56	&	2	\\
21&PETER FORSBERG	&	20032004	&	0.74	&	31.47	&	39	&	0.74	&	4.95	&	10	\\
22&JOE THORNTON	    &	20082009	&	0.39	 &	31.21	&	56	&	0.39	&	2.31	&	0	\\
23&PETER FORSBERG	&	20062007	&	0.74	&	31.12	&	32	&	0.74	&	2.48	&	5	\\
24&PAVEL DATSYUK	&	20052006	&	0.4	     &	30.85	&	75	&	0.4	    &	1.57	&	4	\\
25&ROBERT LANG	    &	20032004	&	0.41	 &	30.8	&	50	&	0.41	&	4.25	&	3	\\
\hline\rule{0pt}{4ex} 
10184&PATRICK LALIME	&	20082009	&	-0.27	&	-15.79	&	-15	&	0	&	0	&	0	\\
10185&JACK JOHNSON	    &	20072008	&	-0.21	&	-15.82	&	-34	&	0	&	0	&	0	\\
10186&BRETT CLARK	    &	20112012	&	-0.22	&	-16.93	&	-47	&	0	&	0	&	0	\\
10187&NICLAS HAVELID	&	20082009	&	-0.19	&	-16.97	&	-40	&-0.19	&	-0.77&	0	\\
10188&JACK JOHNSON	    &	20102011	&	-0.21	&	-17.21	&	  9	&-0.21	&	-1.71&	0	\\
10189&JACK JOHNSON  	&	20112012	&	-0.21	&	-17.21	&	-1	&	0	&	0	&	0	\\
10190&P. J. AXELSSON	&	20082009	&	-0.35	&	-17.35	&	-1	&-0.35	&	-2.1&	-6	\\
10191&BRYAN ALLEN   	&	20062007	&	-0.2	&	-17.9	&	-17	&	0	&	0	&	0	\\
10192&JACK JOHNSON	    &	20092010	&	-0.21	&	-19.46	&	-4	&-0.21	&	-2.35&	4	\\
10193&PATRICK LALIME	&	20052006	&	-0.27	&	-19.77	&	-29	&	0	&	0	&	0	\\
10194&ALEXANDER EDLER	&	20132014	&	-0.55	&	-20.49	&	-35	&	0	&	0	&	0	\\
10195&PATRICK LALIME	&	20072008	&	-0.27	&	-22.29	&	-4	&	0	&	0	&	0	\\
10196&TIM THOMAS    	&	20092010	&	-0.26	&	-24.22	&	-16	&	0	&	0	&	0	\\
10197&ANDREJ MESZAROS	&	20062007	&	-0.33	&	-27.32	&	-6	&-0.33	&	-4.07&	7	\\
10198&BRYCE SALVADOR	&	20082009	&	-0.62	&	-34.4	&	-31	&-0.62	&	-1.5&	-3	\\
10299&PATRICK LALIME	&	20022003	&	-0.27	&	-37.81	&	47	&-0.27	&	-8.76&	12	\\
10200&PATRICK LALIME	&	20032004	&	-0.27	&	-37.81	&	37	&-0.27	&	-3.05&	-3	\\
10201&NICLAS HAVELID	&	20062007	&	-0.67	&	-62.64	&	-22	&-0.67	&	-3.55&	-7	\\
10202&NICLAS HAVELID	&	20052006	&	-0.7	&	-65.94	&	-41	&0      &	0	&	0	\\
10203&JAY BOUWMEESTER	&	20052006	&	-0.69	&	-69.62	&	-32	&	0	&	0	&	0	\\
\end{tabular}
\vskip .5cm
\caption{\label{tab:goals} Top-25 and bottom-20 player-seasons when ranked by their regular-season PPM.  }
\end{table}


The ranking in Table (\ref{hockeymod}) differs dramatically from those in
\cite{gramacy:jensen:taddy:2013}.  One big change here is that we're ordering
players by PPM rather than by $\beta$: this rewards those with more ice-time,
and is a more realistic reflection of their team value.  For example, Marian
Hossa moves to the top of the list when ranked by $\beta$: he is immensely
talented, but tends to log less ice time than many of his peers (in part,
because the Blackhawks have many top forwards).  On the other hand, players
ranked at the bottom by PPM are those who have a negative $\beta$ and who get
a large amount of ice-time.  There are many players who have lower betas than
Jack Johnson (e.g., John McCarthy at -0.5 and Thomas Pock at -0.4), but they
do not get to play as much and thus don't show up in our bottom 20.

 The individual players
$\beta$ effects are also very different from those in
\cite{gramacy:jensen:taddy:2013}; the discrepancy occurs because we're now
\textit{controlling} for additional non-player confounding factors (e.g.,
coaching through team-season effects) and we allow the player performance to
change over time rather than be fixed at a single `career' value.   To help
intuition on why such control and model flexibility is useful, we note that
Sidney Crosby's $\beta$ effects drop significantly (he falls out of the top 5
for any season) if you do not control for the special teams effects.  This
occurs because he spends a lot of time on the penalty kill (short-handed),
which makes it easier for him to get scored upon through no fault of his own.
As another example, many of the goalies have large PPM if you do not control
for team-season effects; since the goalie is almost always on the ice, they
act as a surrogate for aggregate team performance unless you explicitly
control for it (unfortunately for Patrick Lalime, there is still enough
variation at goal to measure the effect and PPM for some goalies).

\section{Analysis: comparison to shot-based metrics}
\label{sec:shots}


The analysis above is built around the event of a `goal'; this is the most
reasonable baseline analysis, as it removes any subjectivity about whether or
not the statistics are related to team performance -- you score more you win.
However, it has recently become popular in hockey analysis to consider
alternative metrics that are built from shots and other events; see
\cite{vol10} for a review. The most popular of such statistics is Corsi, which
counts the number of events that are goals, shots on goal, missed shots, or
blocked shots.  Fenwick is another statistic; it is Corsi but without counting
blocked shots.  Although we have seen no evidence that Corsi or Fenwick events
are more useful in predicting team performance than goal-based metrics, they
do offer a big advantage to the statistician: they lead to a larger sample
size, so that you can hopefully better identify the competing influences of
different players and confounding factors. In our dataset here, there are
$n_{c}=1,329,679$ Corsi events and $n_{f}=1,034,154$ Fenwick events; this is
an order of magnitude more data than we have from the $n_g=69449$ goals.

The standard way to report Corsi and Fenwick for a given player is as a
\textit{for \%} (FP): the total number of events by that player's team
\textit{divided} by the total number of events by either team, while that
player was on the ice.  Since the FP score does not reward players for the
amount of time that they spend on the ice, and for comparison to our analysis
above, we also consider the Corsi of Fenwick PM (C-PM or F-PM): the number
of events by the player's team \textit{minus} the number by the opposing team
while that player was on the ice.  

Of course, all of these statistics -- C-FP, C-PM, etc -- measure marginal
effects.  They are thus subject to the same criticisms as the original PM:
they fail to control for the influence of other players and confounding
factors, and are thus less useful than a partial effect for predicting and
measuring player performance.  However, we can apply the exact same regression
analysis that we've used above for goal events to derive \textit{partial}
versions of the Corsi and Fenwick statistics: simple replace $y_i$ with a
response calculated from Corsi or Fenwick events.  For example, a Corsi
regression applies the model as in (\ref{hockeymod}) but for response $y_i=+1$
if the event was a Corsi event (shot, goal, blocked shot) by the home team and
$y_i=-1$ if it was a Corsi event by the away team. The partial plus-minus
formula of (\ref{eq:ppm}) applies to derive C-PPM or F-PPM, and we note that
the partial-effect analogue to FP is simply the player-event probability:
\begin{equation}
\text{PFP}_{sj} = q_{sj} = \frac{1}{\exp[\beta_{0j} + \beta_{sj}]}.
\end{equation}

The results for Corsi-based performance analysis are in Table \ref{tab:corsi}.
We've added the FP and are reporting $q$ -- player event probabilities --
instead of $\beta$ for direct comparison.


\begin{table}[p]
        \centering\small
        \begin{tabular}{r c c r r r r r r r r }
        \multicolumn{11}{l}{\bf Corse-based performance analysis}\\
            & & & \multicolumn{4}{|c}{Regular Season} & \multicolumn{4}{|c}{Post Season}\\
            Rank & Player & Season  & \multicolumn{1}{|c}{$q$} & PPM & FP & PM & \multicolumn{1}{|c}{$q$} & PPM & FP & PM  \\ \hline
\end{tabular}
\caption{\label{tab:corsi} Top 25 and bottom 20 players by Corsi-based PPM.}
\end{table}

\section{Analysis: the relationship between salary and performance}
\label{sec:salary}


\begin{enumerate}
    \item Figure \ref{fig:ppmsal-corr-season}: PPM in goals is overall more correlated with salaries. All 3 lines show a decrease after lockout season 2004-2005. As to the 2013-2013 lockout, Corsi/Fenwick shows a drop in the correlation while goals shows a drop in the season after. Note Corsi even gives negative correlations for season 2006-2007 and 2005-2006. 
    \item Figure \ref{fig:ppmsal-scat}: Two measures are pretty consistent with each other. Sidney Crosby, Zach Parise and Ryan Suter are three most expensive players in season 2013-2014. According to our evaluation, both goals and Corsi show that Sidney Crosby is under paid while Ryan Suter is over paid. 
    \item Figure \ref{fig:salaryhist}
\end{enumerate}

\begin{figure}[htb!]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/ppmsal-corr-season.pdf}
    \caption{Correlation between salary and PPM over 11 seasons with the lockout season 2012-2013 marked in red.}\label{fig:ppmsal-corr-season}
\end{figure}

\begin{figure}[htb!]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/ppmsal-scat.pdf}
    \caption{Non-zero PPM via goals versus 2013-2014 salary, augmented with rescaled PPM via Corsi. Ordinary least squares fits are added to aid in visualization.}\label{fig:ppmsal-scat}
\end{figure}


\begin{figure}[htb!]
	\centering
	\includegraphics[width=0.8\textwidth]{figures/salaryhist.pdf}
	\caption{Histogram of 2013-2014 salaries for players with non-zero PPM exteading to the full set in gray.}\label{fig:salaryhist}
\end{figure}


\section{Conclusion}\label{sec:conclusion}

We have provided a sketch for how modern techniques in regularized logistic
regression, developed originally to address challenging large-scale problems
in genetics, finance, text mining, can be used to calculate partial player
effects in hockey.  We have argued that that such such partial effects are a
better measure of player ability compared to the classic plus-minus statistic,
and have the benefit of being interpretable on the same scale as plus-minus.
Our development has focused on point-estimation via the {\tt gamlr} package,
which infers parameters under L1 penalization.  Although there are other
software packages offering similar features, for example {\tt glmnet}
\cite{zou_regularization_2005}, we believe that {\tt gamlr} is particularly
well-suited to the data arizing in our hockey analysis, e.g., exploiting the
sparse structure of design matrices comprised of indicators where only a
handful (usually twelve) of thousands (of player) are nonzero. We have shown
how the framework is flexible, allowing one to control for many aspects of
situational play (special teams, overtime, playoffs), and personnel/season
(coaches, salaries, season-years).  A comparison was provided to the popular
Corsi and Fenwick alternatives to plus-minus, and we argued that a recent
emphasis in the literature on shots (and blocked shots), does not in general
compare favorably to the traditional goals focus in this framework.

Beyond model specification, there are several dimensions along which these
methods can be extended or generalized.  One is to break out of the
point-estimation context to apply a fully Bayesian analysis. The framework
originally suggested \cite{gramacy:jensen:taddy:2013} calculated a fully
Bayesian partial player effect via the {\tt reglogit} package for {\sf R},
implementing a Gibbs sampling strategy
\cite{gem:gem:1984} described in full by \cite{gra:pols:2012}.  It combines
two scale-mixture of normals data-augmentation schemes, one for the logit
\cite{holmes:held:2006} and one for the Laplace prior \cite{park:casella:2008}.
Obtaining $T$ samples from the full posterior, is straightforward using the
following {\sf R} code
\begin{verbatim}
bfit <- reglogit(T=T, y=Y, X=X, normalize=FALSE)
\end{verbatim}
The full posterior sample for $\beta$ residing in {\tt bfit} allows posterior
means to be calculated, as well as component-wise variances and correlations
between $\beta_j$'s.  \cite{gramacy:jensen:taddy:2013} show how these can be
used to, say, calculate the probability that one player is better than
another, rank them and provide posterior credible intervals for those
rankings\footnote{see., e.g, 
\url{https://github.com/TaddyLab/hockey/blob/master/results/blog/logistic_pranks_betas.csv}
} or be used to construct teams of players under budget constraints and
subsequently describe the probability that those teams will score more goals
than their opponents.  Like {\tt gamlr}, the software takes advantage of
sparse matrix libraries ({\tt slam} \cite{slam}), and is multi-threaded via
{\tt OpenMP} meaning it can multiple processors simultaneously, which is a
common configuration for modern desktop architectures. However, {\tt reglogit}
is still relatively slow when $n_p$ and $n_g$ are large, requiring several
hours to obtain thousands of samples from the posterior.

Another dimension for extension involves breaking out of the linear framework
entirely.  Anecdotally, we hear that some folks in the sports analytics
community (not just in hockey) prefer a framework built around random forests
\cite{breiman:2001}.  An advantage of trees, on which random forests are based,
is that they naturally explore (non-linear) interactions between predictors,
and thus players and other effects in the hockey analysis.  They also naturally
regularize and provide variable selection features via relevance statistics.  
A disadvantage is that the ensemble tree approach random forests provides does
not readily have a fully Bayesian interpretation, although recent work has 
shown that the ensemble can be seen to be approximating a Bayesian posterior
quantity \cite{taddy:eta:2015}.  Another option along similar lines is Bayesian
additive regression trees (BART, \cite{ChipGeorMcCu2010}), with newer visions
implemented non-linear logistic modeling via the same latent variable
techniques as in the linear case \cite{gra:pols:2012}.

In closing, we remark that it is easy to find flaws in our approach to
estimating partial player effects.  For example, although counting goals
measures time in some sense, the analysis does not directly utilize
time-on-ice information.  A similar drawback would exist for methods which are
instead tailored to shots, etc..  A method based on proportional hazards
\cite{ThoVenJen12}, however, does not suffer this drawback, as it incorporates
time-on-ice directly.  Nevertheless, the linear-logistic approach has much
to recommend it, including simple interpretation, easy extension in terms
of modeling framework and specification of predictors, and fast inference
so that player ability metrics and rankings are easily updatability when
new goals data arrive, making near-real-time analysis possible as games
and seasons progress.

\bibliographystyle{plain}
\bibliography{hockey}